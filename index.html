<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RealtyBot Pro - AI Chatbot for Real Estate</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.1); }
        .chat-bubble-user { background: linear-gradient(135deg, #4f46e5, #7c3aed); }
        .chat-bubble-bot { background: linear-gradient(135deg, #10b981, #059669); }
        .animate-pulse-slow { animation: pulse 3s infinite; }
        .typing-indicator { animation: typing 1.5s infinite; }
        @keyframes typing {
            0%, 20% { opacity: 0.4; }
            50% { opacity: 1; }
            80%, 100% { opacity: 0.4; }
        }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <!-- Navigation -->
    <nav class="glass border-b border-white/20 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <div class="text-white font-bold text-2xl">üè† RealtyBot Pro</div>
            <div class="space-x-4">
                <button id="dashboardBtn" class="text-white hover:bg-white/20 px-4 py-2 rounded">Dashboard</button>
                <button id="chatbotBtn" class="text-white hover:bg-white/20 px-4 py-2 rounded">Live Chatbot</button>
                <button id="settingsBtn" class="text-white hover:bg-white/20 px-4 py-2 rounded">Settings</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mx-auto p-6">
        
        <!-- Dashboard Section -->
        <div id="dashboard" class="section">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Stats Cards -->
                <div class="glass rounded-lg p-6 text-white">
                    <h3 class="text-lg font-semibold mb-2">üí¨ Total Conversations</h3>
                    <p class="text-3xl font-bold">1,247</p>
                    <p class="text-sm opacity-80">‚Üë 23% this month</p>
                </div>
                <div class="glass rounded-lg p-6 text-white">
                    <h3 class="text-lg font-semibold mb-2">üéØ Qualified Leads</h3>
                    <p class="text-3xl font-bold">89</p>
                    <p class="text-sm opacity-80">‚Üë 45% this month</p>
                </div>
                <div class="glass rounded-lg p-6 text-white">
                    <h3 class="text-lg font-semibold mb-2">üí∞ Revenue Generated</h3>
                    <p class="text-3xl font-bold">$12,450</p>
                    <p class="text-sm opacity-80">‚Üë 67% this month</p>
                </div>
            </div>

            <!-- Recent Conversations -->
            <div class="glass rounded-lg p-6 text-white mb-6">
                <h3 class="text-xl font-semibold mb-4">üìä Recent Lead Conversations</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 bg-white/10 rounded">
                        <div>
                            <p class="font-semibold">Sarah Johnson</p>
                            <p class="text-sm opacity-80">Looking for 3BR house in Downtown</p>
                        </div>
                        <div class="text-right">
                            <p class="text-green-300">Qualified Lead</p>
                            <p class="text-xs opacity-80">2 hours ago</p>
                        </div>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-white/10 rounded">
                        <div>
                            <p class="font-semibold">Mike Chen</p>
                            <p class="text-sm opacity-80">Wants to sell condo - $400k range</p>
                        </div>
                        <div class="text-right">
                            <p class="text-blue-300">Hot Lead</p>
                            <p class="text-xs opacity-80">1 day ago</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Training Section -->
            <div class="glass rounded-lg p-6 text-white">
                <h3 class="text-xl font-semibold mb-4">ü§ñ AI Chatbot Configuration</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">OpenAI API Key</label>
                        <input id="apiKey" type="password" placeholder="sk-..." class="w-full p-3 bg-white/20 rounded border border-white/30 text-white placeholder-white/60" value="sk-example123...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Your Specialty</label>
                        <select id="specialty" class="w-full p-3 bg-white/20 rounded border border-white/30 text-white">
                            <option value="residential">Residential Sales</option>
                            <option value="commercial">Commercial Real Estate</option>
                            <option value="luxury">Luxury Properties</option>
                            <option value="rental">Property Rentals</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Market Area</label>
                        <input id="marketArea" type="text" placeholder="e.g., Miami, FL" class="w-full p-3 bg-white/20 rounded border border-white/30 text-white placeholder-white/60" value="Miami, FL">
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Price Range Focus</label>
                        <input id="priceRange" type="text" placeholder="e.g., $200k - $800k" class="w-full p-3 bg-white/20 rounded border border-white/30 text-white placeholder-white/60" value="$300k - $1.2M">
                    </div>
                </div>
                <button id="saveConfig" class="mt-4 bg-green-600 hover:bg-green-700 px-6 py-2 rounded text-white font-semibold">Save Configuration</button>
            </div>
        </div>

        <!-- Live Chatbot Section -->
        <div id="chatbot" class="section hidden">
            <div class="glass rounded-lg p-6 text-white max-w-4xl mx-auto">
                <h3 class="text-xl font-semibold mb-4">üè† Live Real Estate Assistant</h3>
                
                <!-- Chat Messages -->
                <div id="chatMessages" class="h-96 overflow-y-auto mb-4 p-4 bg-white/10 rounded space-y-3">
                    <div class="flex items-start space-x-3">
                        <div class="chat-bubble-bot text-white p-3 rounded-lg max-w-xs">
                            <p>Hi! I'm your AI real estate assistant. I can help you find properties, calculate mortgages, and answer questions about buying or selling homes. What are you looking for today? üè°</p>
                        </div>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="flex space-x-3">
                    <input id="chatInput" type="text" placeholder="Ask about properties, mortgages, market trends..." class="flex-1 p-3 bg-white/20 rounded border border-white/30 text-white placeholder-white/60">
                    <button id="sendMessage" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded text-white font-semibold">Send</button>
                </div>

                <!-- Quick Actions -->
                <div class="mt-4 flex flex-wrap gap-2">
                    <button class="quick-action bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded text-sm text-white">Find 3BR homes under $500k</button>
                    <button class="quick-action bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded text-sm text-white">Calculate mortgage payment</button>
                    <button class="quick-action bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded text-sm text-white">Market analysis for my area</button>
                    <button class="quick-action bg-purple-600 hover:bg-purple-700 px-3 py-2 rounded text-sm text-white">Schedule property showing</button>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings" class="section hidden">
            <div class="glass rounded-lg p-6 text-white max-w-2xl mx-auto">
                <h3 class="text-xl font-semibold mb-6">‚öôÔ∏è Platform Settings</h3>
                
                <div class="space-y-6">
                    <!-- Subscription Plan -->
                    <div>
                        <h4 class="text-lg font-semibold mb-3">üí≥ Current Plan: Professional ($197/month)</h4>
                        <div class="bg-white/10 p-4 rounded">
                            <ul class="space-y-2 text-sm">
                                <li>‚úÖ Unlimited conversations</li>
                                <li>‚úÖ OpenAI GPT-4 integration</li>
                                <li>‚úÖ Lead qualification & CRM integration</li>
                                <li>‚úÖ Custom branding</li>
                                <li>‚úÖ Analytics dashboard</li>
                                <li>‚úÖ Priority support</li>
                            </ul>
                        </div>
                        <button class="mt-3 bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-white">Upgrade Plan</button>
                    </div>

                    <!-- Integration Settings -->
                    <div>
                        <h4 class="text-lg font-semibold mb-3">üîó Integrations</h4>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-white/10 rounded">
                                <span>Zillow API Integration</span>
                                <button class="bg-blue-600 px-3 py-1 rounded text-sm">Connected</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white/10 rounded">
                                <span>MLS Data Feed</span>
                                <button class="bg-gray-600 px-3 py-1 rounded text-sm">Setup</button>
                            </div>
                            <div class="flex items-center justify-between p-3 bg-white/10 rounded">
                                <span>CRM (HubSpot/Salesforce)</span>
                                <button class="bg-blue-600 px-3 py-1 rounded text-sm">Connected</button>
                            </div>
                        </div>
                    </div>

                    <!-- Embed Code -->
                    <div>
                        <h4 class="text-lg font-semibold mb-3">üìã Website Embed Code</h4>
                        <textarea readonly class="w-full h-24 p-3 bg-white/10 rounded border border-white/30 text-white font-mono text-sm">&lt;script src="https://realtybot.ai/widget.js"&gt;&lt;/script&gt;
&lt;div id="realty-chatbot" data-agent="your-agent-id"&gt;&lt;/div&gt;</textarea>
                        <button id="copyEmbed" class="mt-2 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded text-white text-sm">Copy Code</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // App State Management
        let currentSection = 'dashboard';
        let chatMessages = [];
        let isTyping = false;

        // Navigation
        document.getElementById('dashboardBtn').addEventListener('click', () => showSection('dashboard'));
        document.getElementById('chatbotBtn').addEventListener('click', () => showSection('chatbot'));
        document.getElementById('settingsBtn').addEventListener('click', () => showSection('settings'));

        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById(section).classList.remove('hidden');
            currentSection = section;
        }

        // Save Configuration
        document.getElementById('saveConfig').addEventListener('click', () => {
            const config = {
                apiKey: document.getElementById('apiKey').value,
                specialty: document.getElementById('specialty').value,
                marketArea: document.getElementById('marketArea').value,
                priceRange: document.getElementById('priceRange').value
            };
            
            // Store configuration (in real app, send to backend)
            localStorage.setItem('realtybotConfig', JSON.stringify(config));
            alert('‚úÖ Configuration saved! Your chatbot is now personalized for your market.');
        });

        // Chat Functionality
        document.getElementById('sendMessage').addEventListener('click', sendMessage);
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });

        // Quick Actions
        document.querySelectorAll('.quick-action').forEach(button => {
            button.addEventListener('click', () => {
                document.getElementById('chatInput').value = button.textContent;
                sendMessage();
            });
        });

        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            input.value = '';

            // Show typing indicator
            showTyping();

            // Real OpenAI API call
            try {
                const response = await callOpenAI(message);
                hideTyping();
                addMessage(response, 'bot');
            } catch (error) {
                hideTyping();
                addMessage("I'm having trouble connecting to my AI brain. Please check your API key in Settings.", 'bot');
            }
        }

        function addMessage(message, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex items-start space-x-3';
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="chat-bubble-user text-white p-3 rounded-lg max-w-xs ml-auto">
                        <p>${message}</p>
                    </div>
                `;
                messageDiv.classList.add('justify-end');
            } else {
                messageDiv.innerHTML = `
                    <div class="chat-bubble-bot text-white p-3 rounded-lg max-w-xs">
                        <p>${message}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTyping() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typing-indicator';
            typingDiv.className = 'flex items-start space-x-3';
            typingDiv.innerHTML = `
                <div class="chat-bubble-bot text-white p-3 rounded-lg">
                    <div class="typing-indicator">AI is thinking...</div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Copy Embed Code
        document.getElementById('copyEmbed').addEventListener('click', () => {
            const embedCode = document.querySelector('textarea');
            embedCode.select();
            document.execCommand('copy');
            alert('‚úÖ Embed code copied! Paste this into your website HTML.');
        });

        // Real OpenAI Integration (Production Code)
        async function callOpenAI(message) {
            const config = JSON.parse(localStorage.getItem('realtybotConfig') || '{}');
            
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${config.apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4',
                        messages: [
                            {
                                role: 'system',
                                content: `You are an expert real estate assistant for ${config.marketArea || 'the local market'}. You specialize in ${config.specialty || 'residential sales'} with focus on properties in the ${config.priceRange || '$200k-$800k'} range. 
                                
                                Your role is to:
                                1. Qualify potential leads by asking the right questions
                                2. Provide accurate market information and property details
                                3. Calculate mortgage payments and affordability
                                4. Schedule showings and follow up appropriately
                                5. Be helpful, professional, and knowledgeable
                                
                                Always aim to capture contact information and move conversations toward scheduled appointments or consultations.`
                            },
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        max_tokens: 300,
                        temperature: 0.7
                    })
                });

                const data = await response.json();
                return data.choices[0].message.content;
            } catch (error) {
                console.error('OpenAI API Error:', error);
                return "I apologize, but I'm having trouble connecting to my AI brain right now. Please try again in a moment or contact our support team.";
            }
        }

        // Load saved configuration on startup
        window.addEventListener('load', () => {
            const config = JSON.parse(localStorage.getItem('realtybotConfig') || '{}');
            if (config.apiKey) document.getElementById('apiKey').value = config.apiKey;
            if (config.specialty) document.getElementById('specialty').value = config.specialty;
            if (config.marketArea) document.getElementById('marketArea').value = config.marketArea;
            if (config.priceRange) document.getElementById('priceRange').value = config.priceRange;
        });
    </script>
</body>
</html>
